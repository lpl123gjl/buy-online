{"ast":null,"code":"export default {\n  data() {\n    return {\n      //新增菜单消息框 是否显示\n      dialogFormVisible: false,\n      //新增菜单对象\n      menuForm: {\n        id: 0,\n        parentId: 0,\n        //上级菜单id\n        name: '',\n        //菜单名称\n        perms: '',\n        //菜单权限字符串  sys:user:save\n        icon: '',\n        //菜单图标\n        path: '',\n        //菜单路由到组件路径\n        component: '',\n        //菜单路由组件的位置\n        type: 0,\n        //菜单 0 目录    1 菜单      2按钮\n        statu: 1 //菜单状态   1正常   0禁用\n      },\n      //菜单界面 表格数据\n      tableData: [],\n      //新建菜单 对话框验证规则\n      menuRules: {\n        name: [{\n          required: true,\n          message: '请输入菜单名称',\n          trigger: 'blur'\n        }],\n        perms: [{\n          required: true,\n          message: '请输入菜单权限编码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.loadMenuList();\n  },\n  methods: {\n    //关闭对话框，执行数据重置\n    closed(formName) {\n      this.resetMenuForm(formName);\n    },\n    //删除菜单\n    removeMenu(id) {\n      this.$axios.post('/menu/delete/' + id).then(response => {\n        this.$message({\n          showClose: true,\n          message: response.data.resultdata,\n          type: 'success',\n          duration: 1000\n        });\n        //重新加载表格中菜单数据:\n        this.loadMenuList();\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    //编辑菜单  参数，编辑菜单id\n    editMenu(id) {\n      this.$axios.get('/menu/info/' + id).then(response => {\n        //接受返回\n        this.menuForm = response.data.resultdata;\n        this.dialogFormVisible = true;\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    //加载页面菜单表格数据\n    loadMenuList() {\n      this.$axios.get('/menu/list').then(response => {\n        this.tableData = response.data.resultdata;\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    //提交保存菜单对话框\n    submitMenuForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          //新建：/menu/save \n          //编辑：/menu/update\n          this.$axios.post('/menu/' + (this.menuForm.id != 0 ? 'update' : 'save'), this.menuForm).then(response => {\n            //显示添加菜单成功的消息框\n            this.$message({\n              showClose: true,\n              message: response.data.resultdata,\n              type: 'success',\n              onClose: () => {\n                //添加成功消息框的回调：\n                this.loadMenuList();\n                //新建菜单对话框。设置隐藏：\n                this.dialogFormVisible = false;\n                //重置 新建菜单表单数据\n                this.resetMenuForm('menuForm');\n              }\n            });\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    //重置新建菜单对话框表单\n    resetMenuForm(formName) {\n      this.$refs[formName].resetFields();\n      this.menuForm.parentId = 0;\n      this.menuForm.icon = '';\n      this.menuForm.path = '';\n      this.menuForm.component = '';\n      this.menuForm.type = 0;\n      this.menuForm.statu = 1;\n      this.menuForm.name = \"\";\n      this.menuForm.perms = \"\";\n    }\n  }\n};","map":{"version":3,"names":["data","dialogFormVisible","menuForm","id","parentId","name","perms","icon","path","component","type","statu","tableData","menuRules","required","message","trigger","created","loadMenuList","methods","closed","formName","resetMenuForm","removeMenu","$axios","post","then","response","$message","showClose","resultdata","duration","catch","e","console","log","editMenu","get","submitMenuForm","$refs","validate","valid","onClose","resetFields"],"sources":["src/views/system/Menu.vue"],"sourcesContent":["<template>\r\n  <div>\r\n      <!-- 菜单管理工具栏 -->\r\n      <el-form :inline=\"true\">\r\n          <el-form-item>\r\n              <el-button type=\"primary\" @click=\"dialogFormVisible=true\">新增菜单</el-button>\r\n          </el-form-item>\r\n      </el-form>\r\n  \r\n      <!-- 新增菜单对话框 -->\r\n      <el-dialog title=\"编辑菜单\" :visible.sync=\"dialogFormVisible\" width=\"550px\" @closed=\"closed('menuForm')\">\r\n          <el-form ref=\"menuForm\":model=\"menuForm\" label-width=\"100px\" :rules=\"menuRules\">\r\n              <el-form-item label=\"上级菜单\">\r\n                  <el-select v-model=\"menuForm.parentId\" placeholder=\"请选择上级菜单\">\r\n                      <template v-for=\"item in tableData\">\r\n                          <el-option :label=\"item.name\" :value=\"item.id\"></el-option>\r\n                          <template v-for=\"child in item.children\">\r\n                              <el-option :label=\"child.name\" :value=\"child.id\">\r\n                                  <span>&nbsp;&nbsp;&nbsp;{{ ' - ' + child.name }}</span>\r\n                              </el-option>\r\n                          </template>\r\n                      </template>\r\n                  </el-select>\r\n              </el-form-item>\r\n              <el-form-item label=\"菜单名称\" label-width=\"100px\" prop=\"name\">\r\n                  <el-input v-model=\"menuForm.name\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"权限编码\" label-width=\"100px\" prop=\"perms\">\r\n                  <el-input v-model=\"menuForm.perms\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"图标\" label-width=\"100px\">\r\n                  <el-input v-model=\"menuForm.icon\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"菜单URL\" label-width=\"100px\">\r\n                  <el-input v-model=\"menuForm.path\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"菜单组件\" label-width=\"100px\">\r\n                  <el-input v-model=\"menuForm.component\" />\r\n              </el-form-item>\r\n              <el-form-item label=\"菜单类型\" label-width=\"100px\">\r\n                  <el-radio-group v-model=\"menuForm.type\">\r\n                      <el-radio :label=\"0\">目录</el-radio>\r\n                      <el-radio :label=\"1\">菜单</el-radio>\r\n                      <el-radio :label=\"2\">按钮</el-radio>\r\n                  </el-radio-group>\r\n              </el-form-item>\r\n              <el-form-item label=\"菜单状态\" label-width=\"100px\">\r\n                  <el-radio-group v-model=\"menuForm.statu\">\r\n                      <el-radio :label=\"0\">禁用</el-radio>\r\n                      <el-radio :label=\"1\">正常</el-radio>\r\n                  </el-radio-group>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                  <el-button type=\"primary\" @click=\"submitMenuForm('menuForm')\">保存菜单</el-button>\r\n                  <el-button @click=\"resetMenuForm('menuForm')\">重置</el-button>\r\n              </el-form-item>\r\n          </el-form>\r\n      </el-dialog>\r\n  \r\n      <!-- 菜单的表格数据显示 -->\r\n      <el-table :data=\"tableData\" border style=\"width:100%; margin-bottom:20px;\" row-key=\"id\" \r\n      :tree-props=\"{hasChildren:'hasChildren', children:'children' }\" :cell-style=\"{padding:'4px'}\">\r\n          <el-table-column prop=\"name\" label=\"名称\" width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"perms\" label=\"权限编码\" width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"icon\" label=\"菜单图标\" width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"path\" label=\"菜单URL\" width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"component\" label=\"菜单组件\" width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"type\" label=\"菜单类别\" width=\"120\">\r\n              <!-- scope就是表格的数据 取当前这一行数据 scope.row.type -->\r\n              <template slot-scope=\"scope\">\r\n                  <el-tag v-if=\"scope.row.type===0\" type=\"info\" size=\"mini\">目录</el-tag>\r\n                  <el-tag v-else-if=\"scope.row.type===1\" size=\"mini\">菜单</el-tag>\r\n                  <el-tag v-else-if=\"scope.row.type===2\" type=\"warning\" size=\"mini\">按钮</el-tag>\r\n              </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"statu\" label=\"菜单状态\" width=\"120\">\r\n              <template slot-scope=\"scope\">\r\n                  <el-tag v-if=\"scope.row.statu===1\" type=\"success\" size=\"mini\">正常</el-tag>\r\n                  <el-tag v-else-if=\"scope.row.statu===0\" type=\"danger\" size=\"mini\">禁用</el-tag>\r\n              </template>\r\n          </el-table-column>\r\n          <el-table-column fixed=\"right\" label=\"操作\">\r\n              <template slot-scope=\"scope\">\r\n                  <el-button @click=\"editMenu(scope.row.id)\" type=\"text\" size=\"small\">编辑</el-button>\r\n                  <el-divider direction=\"vertical\" />\r\n                  <el-popconfirm  confirm-button-text='确定删除' cancel-button-text='不用了'\r\n    icon=\"el-icon-info\" icon-color=\"red\" title=\"确定要删除该菜单数据吗？\" @confirm=\"removeMenu(scope.row.id)\">\r\n                       <el-button slot=\"reference\" type=\"text\" size=\"small\">删除</el-button>\r\n                  </el-popconfirm>\r\n              </template>\r\n          </el-table-column>\r\n      </el-table>\r\n      \r\n  \r\n  </div>\r\n  </template>\r\n   <script>\r\n   export default{\r\n       data(){\r\n           return{\r\n             //新增菜单消息框 是否显示\r\n             dialogFormVisible:false, \r\n             //新增菜单对象\r\n             menuForm:{\r\n                  id:0,\r\n                  parentId:0,  //上级菜单id\r\n                  name:'',    //菜单名称\r\n                  perms:'',   //菜单权限字符串  sys:user:save\r\n                  icon:'',    //菜单图标\r\n                  path:'',    //菜单路由到组件路径\r\n                  component:'',   //菜单路由组件的位置\r\n                  type:0,         //菜单 0 目录    1 菜单      2按钮\r\n                  statu:1,        //菜单状态   1正常   0禁用\r\n             },\r\n             //菜单界面 表格数据\r\n             tableData:[],\r\n  \r\n             //新建菜单 对话框验证规则\r\n             menuRules:{\r\n              name:[ { required: true, message: '请输入菜单名称', trigger: 'blur' } ],\r\n              perms:[ { required: true, message: '请输入菜单权限编码', trigger: 'blur' } ],\r\n             }\r\n           }\r\n       },\r\n       created(){\r\n          this.loadMenuList();\r\n       },\r\n       methods:{\r\n          \r\n          //关闭对话框，执行数据重置\r\n          closed(formName){\r\n              this.resetMenuForm(formName);\r\n          },\r\n          //删除菜单\r\n          removeMenu(id){\r\n              this.$axios.post('/menu/delete/'+id).then(response=>{\r\n                  this.$message({\r\n                      showClose: true,\r\n                      message: response.data.resultdata,\r\n                      type: 'success',\r\n                      duration:1000,\r\n                  });\r\n                  //重新加载表格中菜单数据:\r\n                  this.loadMenuList();\r\n              }).catch(e=>{console.log(e);})\r\n          },\r\n          //编辑菜单  参数，编辑菜单id\r\n          editMenu(id){\r\n              this.$axios.get('/menu/info/'+id).then(response=>{\r\n                  //接受返回\r\n                 this.menuForm = response.data.resultdata;\r\n                 this.dialogFormVisible=true;\r\n              }).catch(e=>{console.log(e);})\r\n          },\r\n          //加载页面菜单表格数据\r\n          loadMenuList(){\r\n              this.$axios.get('/menu/list').then(response=>{\r\n                  this.tableData = response.data.resultdata;\r\n              }).catch(e=>{console.log(e);})\r\n          },\r\n  \r\n          //提交保存菜单对话框\r\n          submitMenuForm(formName){\r\n              this.$refs[formName].validate((valid)=>{\r\n                  if(valid){\r\n                      //新建：/menu/save \r\n                      //编辑：/menu/update\r\n                      this.$axios.post('/menu/'+(this.menuForm.id!=0?'update':'save'),this.menuForm).then(response=>{\r\n                          //显示添加菜单成功的消息框\r\n                          this.$message({\r\n                              showClose: true,\r\n                              message: response.data.resultdata,\r\n                              type: 'success',\r\n                              onClose:()=>{\r\n                                  //添加成功消息框的回调：\r\n                                  this.loadMenuList();\r\n                                  //新建菜单对话框。设置隐藏：\r\n                                  this.dialogFormVisible=false;\r\n                                  //重置 新建菜单表单数据\r\n                                  this.resetMenuForm('menuForm');\r\n                              }\r\n                          });\r\n                      });\r\n                  }else{\r\n                      return false;\r\n                  }\r\n              })\r\n          },\r\n          //重置新建菜单对话框表单\r\n          resetMenuForm(formName){   \r\n              this.$refs[formName].resetFields();\r\n              this.menuForm.parentId=0;\r\n              this.menuForm.icon='';\r\n              this.menuForm.path='';\r\n              this.menuForm.component='';\r\n              this.menuForm.type=0;\r\n              this.menuForm.statu=1;\r\n              this.menuForm.name=\"\";\r\n              this.menuForm.perms=\"\";\r\n          }\r\n       }\r\n   }\r\n   </script>\r\n   <style scoped>\r\n       \r\n   </style>\r\n     "],"mappings":"AAiGA;EACAA,KAAA;IACA;MACA;MACAC,iBAAA;MACA;MACAC,QAAA;QACAC,EAAA;QACAC,QAAA;QAAA;QACAC,IAAA;QAAA;QACAC,KAAA;QAAA;QACAC,IAAA;QAAA;QACAC,IAAA;QAAA;QACAC,SAAA;QAAA;QACAC,IAAA;QAAA;QACAC,KAAA;MACA;MACA;MACAC,SAAA;MAEA;MACAC,SAAA;QACAR,IAAA;UAAAS,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAV,KAAA;UAAAQ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IAEA;IACAC,OAAAC,QAAA;MACA,KAAAC,aAAA,CAAAD,QAAA;IACA;IACA;IACAE,WAAApB,EAAA;MACA,KAAAqB,MAAA,CAAAC,IAAA,mBAAAtB,EAAA,EAAAuB,IAAA,CAAAC,QAAA;QACA,KAAAC,QAAA;UACAC,SAAA;UACAd,OAAA,EAAAY,QAAA,CAAA3B,IAAA,CAAA8B,UAAA;UACApB,IAAA;UACAqB,QAAA;QACA;QACA;QACA,KAAAb,YAAA;MACA,GAAAc,KAAA,CAAAC,CAAA;QAAAC,OAAA,CAAAC,GAAA,CAAAF,CAAA;MAAA;IACA;IACA;IACAG,SAAAjC,EAAA;MACA,KAAAqB,MAAA,CAAAa,GAAA,iBAAAlC,EAAA,EAAAuB,IAAA,CAAAC,QAAA;QACA;QACA,KAAAzB,QAAA,GAAAyB,QAAA,CAAA3B,IAAA,CAAA8B,UAAA;QACA,KAAA7B,iBAAA;MACA,GAAA+B,KAAA,CAAAC,CAAA;QAAAC,OAAA,CAAAC,GAAA,CAAAF,CAAA;MAAA;IACA;IACA;IACAf,aAAA;MACA,KAAAM,MAAA,CAAAa,GAAA,eAAAX,IAAA,CAAAC,QAAA;QACA,KAAAf,SAAA,GAAAe,QAAA,CAAA3B,IAAA,CAAA8B,UAAA;MACA,GAAAE,KAAA,CAAAC,CAAA;QAAAC,OAAA,CAAAC,GAAA,CAAAF,CAAA;MAAA;IACA;IAEA;IACAK,eAAAjB,QAAA;MACA,KAAAkB,KAAA,CAAAlB,QAAA,EAAAmB,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA;UACA;UACA,KAAAjB,MAAA,CAAAC,IAAA,kBAAAvB,QAAA,CAAAC,EAAA,iCAAAD,QAAA,EAAAwB,IAAA,CAAAC,QAAA;YACA;YACA,KAAAC,QAAA;cACAC,SAAA;cACAd,OAAA,EAAAY,QAAA,CAAA3B,IAAA,CAAA8B,UAAA;cACApB,IAAA;cACAgC,OAAA,EAAAA,CAAA;gBACA;gBACA,KAAAxB,YAAA;gBACA;gBACA,KAAAjB,iBAAA;gBACA;gBACA,KAAAqB,aAAA;cACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAA,cAAAD,QAAA;MACA,KAAAkB,KAAA,CAAAlB,QAAA,EAAAsB,WAAA;MACA,KAAAzC,QAAA,CAAAE,QAAA;MACA,KAAAF,QAAA,CAAAK,IAAA;MACA,KAAAL,QAAA,CAAAM,IAAA;MACA,KAAAN,QAAA,CAAAO,SAAA;MACA,KAAAP,QAAA,CAAAQ,IAAA;MACA,KAAAR,QAAA,CAAAS,KAAA;MACA,KAAAT,QAAA,CAAAG,IAAA;MACA,KAAAH,QAAA,CAAAI,KAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}