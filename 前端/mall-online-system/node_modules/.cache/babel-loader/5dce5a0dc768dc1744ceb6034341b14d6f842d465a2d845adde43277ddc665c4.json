{"ast":null,"code":"export default {\n  data() {\n    return {\n      searchForm: {\n        details: '' // 搜索表单中的评论详情\n      },\n      tableData: [],\n      // 表格数据\n      current: 1,\n      // 当前页码\n      size: 5,\n      // 每页显示的条数\n      total: 0,\n      // 总条数\n      drawerVisible: false,\n      // 抽屉的可见性\n      commentForm: {\n        accountId: '',\n        accountName: '',\n        score: null,\n        details: '',\n        businessId: null,\n        businessName: '',\n        goodsId: null,\n        goodsName: '',\n        commImage: ''\n      }\n    };\n  },\n  created() {\n    this.loadCommentList();\n  },\n  methods: {\n    // 加载评论列表\n    loadCommentList() {\n      this.$axios.get('/comment/list', {\n        params: {\n          details: this.searchForm.details,\n          // 搜索表单中的评论详情\n          current: this.current,\n          // 当前页码\n          size: this.size // 每页显示的条数\n        }\n      }).then(response => {\n        const data = response.data.resultdata;\n        this.tableData = data.records;\n        this.current = data.current;\n        this.size = data.size;\n        this.total = data.total;\n      });\n    },\n    // 查看评论详情\n    viewComment(id) {\n      this.$axios.get(`/comment/info/${id}`).then(response => {\n        this.commentForm = response.data.resultdata;\n        this.drawerVisible = true; // 显示抽屉\n      });\n    },\n    // 处理每页显示条数变化\n    handleSizeChange(size) {\n      this.size = size;\n      // 重新加载评论列表\n      this.loadCommentList();\n    },\n    // 处理当前页码变化\n    handleCurrentChange(current) {\n      this.current = current;\n      this.loadCommentList();\n    },\n    // 重置评论表单\n    resetCommentForm() {\n      this.commentForm = {\n        accountId: '',\n        accountName: '',\n        score: null,\n        details: '',\n        businessId: null,\n        businessName: '',\n        goodsId: null,\n        goodsName: '',\n        commImage: ''\n      };\n    }\n  }\n};","map":{"version":3,"names":["data","searchForm","details","tableData","current","size","total","drawerVisible","commentForm","accountId","accountName","score","businessId","businessName","goodsId","goodsName","commImage","created","loadCommentList","methods","$axios","get","params","then","response","resultdata","records","viewComment","id","handleSizeChange","handleCurrentChange","resetCommentForm"],"sources":["src/views/app/Comment.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 评论管理 工具栏 -->\r\n    <el-form ref=\"searchForm\" :model=\"searchForm\" :inline=\"true\">\r\n      <el-form-item>\r\n        <!-- 输入框，用于输入要搜索的评论详情 -->\r\n        <el-input placeholder=\"请输入要搜索的评论详情\" v-model=\"searchForm.details\" clearable />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <!-- 搜索按钮，点击后调用 loadCommentList 方法 -->\r\n        <el-button @click=\"loadCommentList()\">搜索</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!-- 评论数据表格显示 -->\r\n    <el-table :data=\"tableData\" border style=\"width:100%; margin-bottom:20px;\" :cell-style=\"{ padding: '4px' }\">\r\n      <el-table-column prop=\"accountName\" label=\"用户名\" width=\"100\" />\r\n      <!-- 评论详情列 -->\r\n      <el-table-column prop=\"details\" label=\"评论详情\" width=\"250\"/>\r\n      <!-- 商家名称列 -->\r\n      <el-table-column prop=\"businessName\" label=\"商家名称\" width=\"180\" />\r\n      <!-- 商品名称列 -->\r\n      <el-table-column prop=\"goodsName\" label=\"商品名称\" width=\"180\" />\r\n      <el-table-column label=\"评分\" width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n          <el-rate v-model=\"scope.row.score\" disabled></el-rate>\r\n        </template>\r\n      </el-table-column>\r\n      <!-- fmtDate 格式化日期 -->\r\n      <el-table-column label=\"创建时间\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.created | fmtDate }}\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column fixed=\"right\" label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" size=\"small\" @click=\"viewComment(scope.row.commId)\">查看详情</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页组件 -->\r\n    <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"current\"\r\n      :page-sizes=\"[5, 10, 15, 20]\" :page-size=\"size\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n    </el-pagination>\r\n\r\n    <!-- 查看评论的抽屉 -->\r\n    <el-drawer title=\"查看评论\" :visible.sync=\"drawerVisible\" size=\"50%\" :with-header=\"true\" @closed=\"resetCommentForm('commentForm')\">\r\n      <el-form ref=\"commentForm\" :model=\"commentForm\" label-width=\"100px\">\r\n        \r\n        <el-form-item label=\"用户名\" label-width=\"100px\">\r\n          <el-input v-model=\"commentForm.accountName\" disabled />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"评分\" label-width=\"100px\">\r\n          <el-rate v-model=\"commentForm.score\" style=\"padding-top: 10px;\" disabled ></el-rate>\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"评论详情\" label-width=\"100px\">\r\n          <el-input v-model=\"commentForm.details\" type=\"textarea\" disabled />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"商家名称\" label-width=\"100px\">\r\n          <el-input v-model=\"commentForm.businessName\" disabled />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"商品名称\" label-width=\"100px\">\r\n          <el-input v-model=\"commentForm.goodsName\" disabled />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"评论图片\" label-width=\"100px\">\r\n          <el-image :src=\"commentForm.commImage\" style=\"width: 100px; height: 100px\" />\r\n        </el-form-item>\r\n        \r\n        <el-form-item style=\"text-align: center;\">\r\n          <el-button type=\"primary\" @click=\"drawerVisible = false\">关闭</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        details: '', // 搜索表单中的评论详情\r\n      },\r\n      tableData: [], // 表格数据\r\n      current: 1, // 当前页码\r\n      size: 5, // 每页显示的条数\r\n      total: 0, // 总条数\r\n      drawerVisible: false, // 抽屉的可见性\r\n      commentForm: {\r\n        accountId: '', \r\n        accountName: '', \r\n        score: null, \r\n        details: '', \r\n        businessId: null, \r\n        businessName: '', \r\n        goodsId: null, \r\n        goodsName: '', \r\n        commImage: '', \r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.loadCommentList();\r\n  },\r\n  methods: {\r\n    // 加载评论列表\r\n    loadCommentList() {\r\n      this.$axios.get('/comment/list', {\r\n        params: {\r\n          details: this.searchForm.details, // 搜索表单中的评论详情\r\n          current: this.current, // 当前页码\r\n          size: this.size, // 每页显示的条数\r\n        },\r\n      }).then(response => {\r\n        const data = response.data.resultdata;\r\n        this.tableData = data.records; \r\n        this.current = data.current; \r\n        this.size = data.size; \r\n        this.total = data.total; \r\n      });\r\n    },\r\n    // 查看评论详情\r\n    viewComment(id) {\r\n      this.$axios.get(`/comment/info/${id}`).then(response => {\r\n        this.commentForm = response.data.resultdata; \r\n        this.drawerVisible = true; // 显示抽屉\r\n      });\r\n    },\r\n    // 处理每页显示条数变化\r\n    handleSizeChange(size) {\r\n      this.size = size; \r\n      // 重新加载评论列表\r\n      this.loadCommentList(); \r\n    },\r\n    // 处理当前页码变化\r\n    handleCurrentChange(current) {\r\n      this.current = current; \r\n      this.loadCommentList(); \r\n    },\r\n    // 重置评论表单\r\n    resetCommentForm() {\r\n      this.commentForm = {\r\n        accountId: '',\r\n        accountName: '',\r\n        score: null,\r\n        details: '',\r\n        businessId: null,\r\n        businessName: '',\r\n        goodsId: null,\r\n        goodsName: '',\r\n        commImage: '',\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>\r\n"],"mappings":"AAmFA;EACAA,KAAA;IACA;MACAC,UAAA;QACAC,OAAA;MACA;MACAC,SAAA;MAAA;MACAC,OAAA;MAAA;MACAC,IAAA;MAAA;MACAC,KAAA;MAAA;MACAC,aAAA;MAAA;MACAC,WAAA;QACAC,SAAA;QACAC,WAAA;QACAC,KAAA;QACAT,OAAA;QACAU,UAAA;QACAC,YAAA;QACAC,OAAA;QACAC,SAAA;QACAC,SAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,eAAA;EACA;EACAC,OAAA;IACA;IACAD,gBAAA;MACA,KAAAE,MAAA,CAAAC,GAAA;QACAC,MAAA;UACApB,OAAA,OAAAD,UAAA,CAAAC,OAAA;UAAA;UACAE,OAAA,OAAAA,OAAA;UAAA;UACAC,IAAA,OAAAA,IAAA;QACA;MACA,GAAAkB,IAAA,CAAAC,QAAA;QACA,MAAAxB,IAAA,GAAAwB,QAAA,CAAAxB,IAAA,CAAAyB,UAAA;QACA,KAAAtB,SAAA,GAAAH,IAAA,CAAA0B,OAAA;QACA,KAAAtB,OAAA,GAAAJ,IAAA,CAAAI,OAAA;QACA,KAAAC,IAAA,GAAAL,IAAA,CAAAK,IAAA;QACA,KAAAC,KAAA,GAAAN,IAAA,CAAAM,KAAA;MACA;IACA;IACA;IACAqB,YAAAC,EAAA;MACA,KAAAR,MAAA,CAAAC,GAAA,kBAAAO,EAAA,IAAAL,IAAA,CAAAC,QAAA;QACA,KAAAhB,WAAA,GAAAgB,QAAA,CAAAxB,IAAA,CAAAyB,UAAA;QACA,KAAAlB,aAAA;MACA;IACA;IACA;IACAsB,iBAAAxB,IAAA;MACA,KAAAA,IAAA,GAAAA,IAAA;MACA;MACA,KAAAa,eAAA;IACA;IACA;IACAY,oBAAA1B,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;MACA,KAAAc,eAAA;IACA;IACA;IACAa,iBAAA;MACA,KAAAvB,WAAA;QACAC,SAAA;QACAC,WAAA;QACAC,KAAA;QACAT,OAAA;QACAU,UAAA;QACAC,YAAA;QACAC,OAAA;QACAC,SAAA;QACAC,SAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}